# 리액트를 다루는 기술
## 1.1 왜 리액트인가?
- 다양한 자바스크립트 프레임워크를 활용하여 규모가 큰 애플리케이션을 만들 수 있는 시대.
- 자바스크립트 기반의 프레임워크들은 다양하며, Angular, Vue.js, Ember.js 등이 있다.
- 이 프레임워크들은 주로 MVC 아키텍처 또는 MVVM 아키텍처를 사용하는데, 이러한 아키텍처들의 공통점은 바로 Model과 View가 있다는 것이다.
- 모델은 애플리케이션에서 사용하는 데이터를 관리하는 영역이고, 뷰는 사용자에게 보이는 부분이다. 
- 프로그램이 사용자에게서 어떤 작업을 받으면 컨트롤러는 모델 데이터를 조회하거나 수정하고, 변경된 사항을 뷰에 반영하게 된다. 반영하는 과정에서 뷰를 변형하게 된다.

```json
{
    "title": "Hello",
    "contents": "Hello World",
    "author": "DoYeon",
    "likes": 1
}
```
```html
<div id="post-1">
    <div class="title">Hello</div>
    <div class="contents">Hello World</div>
    <div class="author">DoYeon</div>
    <div class="likes">1</div>
</div>
```
- 위 예에서 만약에 likes 값을 2로 업데이트하게 될 경우 애플리케이션에서 post-1의 likes 요소를 찾아 내부를 수정해야한다. 이 단순한 예제에서는 요소를 찾아서 변경하는 규칙이 매우 간단하지만 규모가 큰 애플리케이션의 경우 그러한 작업들이 매우 복잡해지고 성능도 떨어지게 될 수 있다.
- 이를 해결하기 위해 데이터가 변할 때마다 기존 뷰를 날려 버리고 처음부터 새로 렌더링하는 방식이 제시되었다. 그러나 이런 방식으로 하게될 경우 CPU 점유율이 매우 높아지고, 메모리도 많이 사용하게 될 것이다. 또한 끊김 현상이 발생할 수도 있다.
- 그리하여 최대한 성능을 아끼고 편안한 사용자 경험을 제공하면서 구현하고자 개발된 것이 리액트이다.
### 1.1.1 리액트의 이해
- 리액트는 자바스크립트 라이브러리로 사용자 인터페이스를 만드는 데 사용한다. 구조가 MVC, MVW 등인 프레임워크와 달리 오직 View에만 신경 쓰는 라이브러리이다.
- 리액트 프로젝트에서 **특정 부분이 어떻게 생길지 정하는 선언체가 있는데, 이를 컴포넌트**라고 한다.
- 사용자 화면에 뷰를 보여주는 것을 렌더링이라고 한다.
#### 1.1.1.1 초기 렌더링
- 맨 처음에 어떻게 보일지를 정하는 초기 렌더링을 해야하는데 리액트에서는 render 함수가 그 역할을 한다.
- 이 함수는 컴포넌트가 어떻게 생겼는지 정의하는 역할을 한다. 이 함수는 html 형식의 문자열을 반환하지 않고, 뷰가 어떻게 생겼고 어떻게 작동하는지에 대한 정보를 지닌 객체를 반환한다.
- 컴포넌트 내부에는 또 다른 컴포넌트가 들어갈 수 있다. render 함수를 실행하게 되면 그 내부에 있는 컴포넌트들도 재귀적으로 렌더링하게 된다.
- 이렇게 최상위 컴포넌트의 렌더링 작업이 끝나면 지니고 있는 정보들을 사용하여 HTML 마크업을 만들고, 이를 우리가 정하는 실제 페이지의 DOM 요소 안에 주입한다.
### 1.1.1.2 조회 과정
- 컴포넌트에서 데이터에 변화가 있을 때 새로운 요소로 갈아끼우는 작업을 하게 된다.
- 이 작업 또한 render 함수가 하게 되며, 컴포넌트는 데이터를 업데이트 했을 때 새로운 데이터를 가지고 render 함수를 또 다시 호출하게 된다.
- 이 때 render 함수가 반환하는 결과를 곧바로 DOM에 반영하지 않고, 이전에 render 함수가 만들었던 컴포넌트 정보와 현재 render 함수가 만든 컴포넌트 정보를 비교한다.
- 그리고 **자바스크립트를 사용하여 두 가지 뷰를 최소한의 연산으로 비교한 후, 둘의 차이를 알아내 최소한의 연산으로 DOM 트리를 업데이트한다.**
#
## 1.2 리액트의 특징
### 1.2.1 Virtual DOM
- 리액트의 주요 특징 중 하나는 Virtual DOM을 사용한다는 것.
#### 1.2.1.1 DOM이란?
- DOM은 객체로 문서 구조를 표현하는 방법으로 XML이나 HTML로 작성한다.
- 웹 브라우저는 DOM을 활용하여 객체에 자바스크립트와 CSS를 적용한다. DOM은 트리 형태라서 특정 노드를 찾거나 수정하거나 제거하거나 원하는 곳에 삽입할 수 있다.
- DOM 자체는 빠르지만, 웹 브라우저 단에서 DOM에 변화가 일어나면 웹브라우저가 CSS를 다시 연산하고, 레이아웃을 구성하고, 페이지를 리페인트하기 때문에 지속적으로 DOM에 직접 접근하여 변화를 주게될 경우 성능 이슈가 발생할 수 있다.
- **리액트는 Virtual DOM 방식을 사용하여 DOM 업데이트를 추상화함으로써 DOM 처리 횟수를 최소화하고 효율적으로 진행한다.**
#### 1.2.1.2 Virtual DOM
- 리액트에서 데이터가 변하여 웹 브라우저에 실제 DOM을 업데이트할 때는 세 가지 절차를 밟는다.
    1. 데이터를 업데이트하면 전체 UI를 Virtual DOM에 리렌더링 한다.
    2. 이전 Virtual DOM에 있던 내용과 현재 내용을 비교한다.
    3. 바뀐 부분만 실제 DOM에 적용한다.

### 1.2.2 기타 특징
- 리액트는 다른 웹 프레임워크와 다르게 오직 뷰만 담당하며, 리액트는 프레임워크가 아니라 라이브러이이다.